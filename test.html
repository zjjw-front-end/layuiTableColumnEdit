<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>示例demo</title>
</head>
<body>
<div id="div" style="background:green;"></div>
<script type="text/template" id="div1">
    <span>这是一个模板</span>
</script>
<script type="text/template" id="div2">
    <div>数据：{{data}}</div>
    <div>年龄：{{age}}</div>
    <div>姓名：{{name}}</div>
</script>
</body>
<script src="layui/layui.js"></script>
<script type="text/javascript">

    function template(dom, data) {
        var replaceDom = dom.replace(/{{([\s\S]+?)}}/g, function($0,$1) {
            return data[$1] || '';
        });
        return replaceDom;
    }

    var div = document.querySelector('#div');
    var div1 = document.getElementById('div1');
    var div2 = document.getElementById('div2');
    //div.innerHTML = div1.innerHTML;
    div.innerHTML = template(div2.innerHTML,{ data: "123", name: "csdn", age: "xxoo" });
    var aa='if((item.value+\"\").indexOf(d.search)>-1){';
    var res = /(?="|')/g;
    aa=aa.replace(res,'\\');
    console.log(aa);

    layui.config({
        base: 'module/'
    }).extend({
        layuiTableColumnEdit:'js/layuiTableColumnEdit'
    }).use(['laytpl'], function () {
        var laytpl = layui.laytpl;

        var html = [
            '{{! ----------------------------------------------------- !}}'
            ,'{{# if(d.data){ }}'
            ,'{{# layui.each(d.data, function(index,item){ }}'
            ,'{{# if((item.value+\'\').indexOf(d.search)>-1){ }}'
            ,'<dd lay-value="{{= item.name }}" class="layui-table-select-dd">{{= item.value }}</dd>',
            ,'{{# } }}'
            ,'{{# }); }}'
            ,'{{# } else { }}'
            ,'<dd lay-value="" class="">无数据</dd>'
            ,'{{# } }}'].join('');

        var selectParams = [
            {name:1,value:"<张三1> a"},
            {name:2,value:"<张三2>"},
            {name:3,value:"<张三3>"},
            {name:4,value:"<张三4>"},
            {name:5,value:"<张三5>    b"}
        ];
        console.log(11111111111111111111111111)
        var a = laytpl(html).render({
            data: selectParams
            ,search: '' //索引
        });
        console.log(a)
        div.innerHTML = a;
    });

</script>
</html>