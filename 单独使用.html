<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>示例demo</title>
    <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<table class="layui-hide" id="tableId" lay-filter="tableEvent"></table>
</body>
<script src="layui/layui.js"></script>
<script>
    layui.config({
        base: 'module/'
    }).extend({
        tableEdit:'js/tableEdit'
    }).use(['table','tableEdit','layer'], function () {
        var table = layui.table,tableEdit = layui.tableEdit,$ = layui.$;
        var params = [
            {name:1,value:"张三1"},
            {name:2,value:"张三2"},
            {name:3,value:"张三3"},
            {name:4,value:"张三4"},
            {name:5,value:"张三5"}
        ];
        table.render({
            elem: '#tableId'
            ,id:'id'
            ,url:'data.json'
            ,height: 'full-90'
            ,page: true
            ,cols: [[
                {type:'checkbox'}
                ,{field:'name',title: '姓名',width:120}
                ,{field:'danxuan', title: '单选',width:120,event:'danxuan'}
                ,{field:'duoxuan', title: '多选',width:120,event:'duoxuan'}
                ,{field:'birthday', title: '生日',width:120,event:'birthday'}
            ]]
        });

        table.on('tool(tableEvent)', function(obj){
            var zthis = this;
            if(obj.event === 'danxuan'){ //单选
                tableEdit.createSelect({
                    element: zthis,
                    data: params,
                    //enabled:true,//true：开启多选，false：单选。默认为false
                    callback: function (res) {
                        //把选择的数据更新到行数据中
                        obj.update({danxuan: res.name});
                        //把选择的显示数据更新到单元格中显示
                        tableEdit.update({element:this,value:res.value});
                    }
                });
            }

            if(obj.event === 'duoxuan'){ //多选
                $.getJSON('selectData.json',{},function (result) {
                    tableEdit.createSelect({
                        data:result.data,
                        element:zthis,
                        enabled:true,//true：开启多选，false：单选。默认为false
                        callback:function (res) {
                            obj.update({duoxuan: res[0].value});
                        }
                    });
                });
            }

            if(obj.event === 'birthday'){ //日期
                tableEdit.createDate({
                    //日期时间选择器的类型：datetime（日期时间）、date（日期）和time（时间），默认datetime。
                    dateType:'datetime',
                    element:zthis,
                    callback:function (res) {
                        //把时间更新到行数据中
                        obj.update({birthday:res});
                    }
                });
            }
        });

    });
</script>
</html>